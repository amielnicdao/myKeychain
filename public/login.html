<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://code.jquery.com/jquery.js"></script>
  <title>Document</title>
  <script type="application/javascript">
    function doThis (event) {
      // event.preventDefault(); 
      console.log("dothis function");
      const userId = event.target.dataset.id
      // console.log("id = " + userId);
      localStorage.clear();
      localStorage.setItem("id", userId);
      // console.log(localStorage.getItem("id"));
    }
    $(document).ready(function () {
      $.ajax("/display", {
        type: "GET"
      }).then(function (data) {
        console.log(data);
        var names = data;
        var len = names.users.length;
        var names_elem = $("#names");

        for (var i = 0; i < len; i++) {
          names_elem.append(
            "<li><p>" +
            names.users[i].id +
            "." +
            names.users[i].name +
            `<a onclick='doThis(event)' href='/dashboard' role='button' data-id='` +
            names.users[i].id +
            "' class='loginBtn'>Log In!</a></p></li>"
          );
        }
        //href='/dashboard'
        // window.location.href = "/dashboard";
        console.log(data)
      });
    });
  </script>
</head>

<body>
  <div id="names"></div>
</body>

</html>


